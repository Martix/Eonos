From 16cdb1985052e6d16f724838f575deed7aeaa72a Mon Sep 17 00:00:00 2001
From: Martin Jansa <Martin.Jansa@gmail.com>
Date: Mon, 1 Nov 2010 09:46:20 +0100
Subject: [PATCH] config: replace AC_CHECK_FILE with test -f

* AC_CHECK_FILE doesn't work for cross compilation
* https://bugs.freedesktop.org/show_bug.cgi?id=31289
---
 configure.ac |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/configure.ac b/configure.ac
index 611861c..73c7def 100644
--- a/configure.ac
+++ b/configure.ac
@@ -35,8 +35,11 @@ AM_CONFIG_HEADER(config.h)
 
 AC_PROG_YACC
 AC_PATH_PROG([YACC_INST], $YACC)
-AC_CHECK_FILE([$srcdir/cfgparse.c], [],
-              [test -z "$YACC_INST" && AC_MSG_ERROR([yacc not found - unable to compile cfgparse.y])])
+if test ! -f "$srcdir/cfgparse.c"; then
+   if test -z "$YACC_INST"; then
+      AC_MSG_ERROR([yacc not found - unable to compile cfgparse.y])
+   fi
+fi
 
 XORG_DEFAULT_OPTIONS
 
-- 
1.7.3.2

